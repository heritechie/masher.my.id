---
import Layout from '../layouts/Layout.astro';
import { SUPPORTED_LOCALES, translations, defaultLocale, type Locale } from '../i18n/translations';

const { locale } = Astro.props as { locale: Locale };
const t = translations[locale];

const languageLinks = SUPPORTED_LOCALES.map((code) => ({
	lang: code,
	label: t.layout.languageNames[code],
	href: code === defaultLocale ? '/webtools/' : `/${code}/webtools/`,
	active: code === locale,
}));

const journalLink = locale === defaultLocale ? '/jurnal/' : `/${locale}/journal/`;

const navLinks = [
	{
		label: t.layout.learningJourneyLabel,
		href: journalLink,
		active: false,
	},
	{
		label: t.layout.knowledgeBaseLabel,
		href: locale === defaultLocale ? '/knowledge-base/' : `/${locale}/knowledge-base/`,
		active: false,
	},
	{
		label: t.layout.webtoolsLabel,
		href: locale === defaultLocale ? '/webtools/' : `/${locale}/webtools/`,
		active: true,
	},
];

const tools = t.webtools.tools;
---

<Layout
	title={t.webtools.meta.title}
	description={t.webtools.meta.description}
	brand={t.layout.brand}
	locale={locale}
	languageLinks={languageLinks}
	navLinks={navLinks}
	navLabel={t.layout.primaryNavLabel}
	mobileMenuLabel={t.layout.mobileMenuLabel}
	switcherLabel={t.layout.languageSwitcherLabel}
	themeToggleLabel={t.layout.themeToggleLabel}
>
	<section class="webtools-hero">
		<header class="webtools-hero__content">
			<span class="webtools-hero__eyebrow">
				<i class="ri-rocket-2-line" aria-hidden="true"></i>
				{t.webtools.title}
			</span>
			<p class="webtools-hero__intro">{t.webtools.intro}</p>
			<p class="webtools-hero__note">
				<i class="ri-shield-check-line" aria-hidden="true"></i>
				<span>{t.webtools.note}</span>
			</p>
		</header>
	</section>

	<section class="webtools-grid" aria-label={t.webtools.title}>
		{tools.map((tool) => {
			const isSoon = tool.status === 'soon';
			const isAvailable = tool.status === 'available' && tool.link;
			const actionLabel = isSoon ? t.webtools.comingSoonLabel : t.webtools.launchLabel;
			return (
				<article class="tool-card">
					<header class="tool-card__header">
						<h2 class="tool-card__title">
							<i class={`ri ${tool.icon}`} aria-hidden="true"></i>
							<span>{tool.title}</span>
						</h2>
					</header>
					<p class="tool-card__description">{tool.description}</p>
					{tool.stack?.length ? (
						<div class="tool-card__stack">
							<span class="tool-card__stack-label">{t.webtools.stackLabel}</span>
							<ul class="tool-card__stack-list">
								{tool.stack.map((tech) => (
									<li>{tech}</li>
								))}
							</ul>
						</div>
					) : null}
					{isAvailable ? (
						<a class="tool-card__action" href={tool.link}>
							<i class="ri-arrow-right-up-line" aria-hidden="true"></i>
							<span>{actionLabel}</span>
						</a>
					) : (
						<button class="tool-card__action" type="button" disabled>
							<i class="ri-arrow-right-up-line" aria-hidden="true"></i>
							<span>{actionLabel}</span>
						</button>
					)}
				</article>
			);
		})}
	</section>

	<section class="webtools-request">
		<div class="webtools-request__content">
			<h2>{t.webtools.requestTitle}</h2>
			<p>{t.webtools.requestBody}</p>
		</div>
		<a class="webtools-request__cta" href="mailto:heritechie@gmail.com?subject=Webtools%20idea">
			<i class="ri-mail-send-line" aria-hidden="true"></i>
			<span>{t.webtools.requestAction}</span>
		</a>
	</section>
</Layout>

<style>
	.webtools-hero {
		display: grid;
		padding: 36px;
		border-radius: 28px;
		background:
			linear-gradient(160deg, rgba(210, 210, 207, 0.16), transparent 60%),
			var(--surface-card);
		border: 1px solid var(--glass-stroke);
		box-shadow: var(--shadow-soft);
		backdrop-filter: blur(22px);
	}

	.webtools-hero__content {
		display: grid;
		gap: 18px;
	}

	.webtools-hero__eyebrow {
		display: inline-flex;
		align-items: center;
		gap: 8px;
		padding: 6px 14px;
		border-radius: 999px;
		border: 1px solid var(--glass-stroke);
		background: var(--surface-highlight);
		color: var(--text-muted);
		font-size: 0.82rem;
		text-transform: uppercase;
		letter-spacing: 0.14em;
	}

	h1 {
		margin: 0;
		font-family: var(--font-display);
		font-size: clamp(2.4rem, 5vw, 3.4rem);
	}

	.webtools-hero__intro {
		margin: 0;
		color: var(--text-muted);
		font-size: 1.08rem;
		max-width: 72ch;
	}

	.webtools-hero__note {
		display: inline-flex;
		align-items: center;
		gap: 10px;
		margin: 0;
		padding: 10px 18px;
		border-radius: 18px;
		background: var(--surface-highlight);
		border: 1px solid var(--glass-stroke);
		color: var(--text-main);
		font-size: 0.95rem;
	}

	.webtools-grid {
		display: grid;
		grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
		gap: 18px;
	}

	.tool-card {
		display: grid;
		gap: 16px;
		padding: 24px;
		border-radius: 22px;
		background: var(--surface-card);
		border: 1px solid var(--glass-stroke);
		box-shadow: var(--shadow-soft);
		position: relative;
		overflow: hidden;
	}

	.tool-card::after {
		content: '';
		position: absolute;
		inset: 0;
		background: linear-gradient(150deg, rgba(255, 255, 255, 0.08), transparent 60%);
		pointer-events: none;
	}

	.tool-card > * {
		position: relative;
	}

	.tool-card__header {
		margin-bottom: 6px;
	}

	.tool-card__title {
		display: inline-flex;
		align-items: center;
		gap: 12px;
		margin: 0;
		font-size: 1.25rem;
		font-family: var(--font-display);
	}

	.tool-card__title i {
		display: inline-flex;
		align-items: center;
		justify-content: center;
		width: 42px;
		height: 42px;
		border-radius: 14px;
		border: 1px solid var(--glass-stroke);
		background: var(--surface-highlight);
		font-size: 1.35rem;
	}

	.tool-card__description {
		margin: 0;
		color: var(--text-muted);
	}

	.tool-card__stack {
		display: flex;
		flex-wrap: wrap;
		align-items: center;
		gap: 8px 10px;
		margin: 10px 0 0;
	}

	.tool-card__stack-label {
		font-size: 0.78rem;
		font-weight: 600;
		text-transform: uppercase;
		letter-spacing: 0.08em;
		color: var(--text-muted);
	}

	.tool-card__stack-list {
		display: inline-flex;
		flex-wrap: wrap;
		gap: 6px;
		margin: 0;
		padding: 0;
		list-style: none;
	}

	.tool-card__stack-list li {
		padding: 4px 12px;
		border-radius: 999px;
		border: 1px solid var(--glass-stroke);
		background: var(--surface-highlight);
		font-size: 0.82rem;
		color: var(--text-muted);
	}

	.tool-card__action {
		display: inline-flex;
		align-items: center;
		gap: 10px;
		padding: 10px 18px;
		border-radius: 999px;
		border: 1px solid var(--glass-stroke);
		background: var(--surface-highlight);
		color: var(--text-main);
		font-weight: 600;
		text-decoration: none;
		cursor: pointer;
		transition:
			border-color 0.2s ease,
			background 0.2s ease,
			color 0.2s ease,
			box-shadow 0.2s ease;
	}

	.tool-card__action:hover,
	.tool-card__action:focus-visible {
		border-color: var(--glass-stroke-strong, rgba(255, 255, 255, 0.45));
		background: var(--surface-highlight-strong, rgba(255, 255, 255, 0.16));
		color: var(--text-main);
		box-shadow: var(--shadow-soft);
		outline: none;
	}

	.tool-card__action[disabled] {
		cursor: not-allowed;
		opacity: 0.7;
		color: var(--text-muted);
		box-shadow: none;
	}

	.tool-card__action[disabled]:hover,
	.tool-card__action[disabled]:focus-visible {
		border-color: var(--glass-stroke);
		background: var(--surface-highlight);
		color: var(--text-muted);
		box-shadow: none;
	}

	.webtools-request {
		display: flex;
		flex-wrap: wrap;
		align-items: center;
		justify-content: space-between;
		gap: 16px;
		margin-top: 28px;
		padding: 24px;
		border-radius: 22px;
		border: 1px solid var(--glass-stroke);
		background: var(--surface-highlight);
	}

	.webtools-request__content {
		display: grid;
		gap: 8px;
	}

	.webtools-request__content h2 {
		margin: 0;
		font-family: var(--font-display);
		font-size: clamp(1.8rem, 3.5vw, 2.4rem);
	}

	.webtools-request__content p {
		margin: 0;
		color: var(--text-muted);
		max-width: 60ch;
	}

	.webtools-request__cta {
		display: inline-flex;
		align-items: center;
		gap: 10px;
		padding: 10px 18px;
		border-radius: 999px;
		background: var(--accent);
		color: var(--surface);
		font-weight: 600;
	}

	@media (max-width: 768px) {
		.webtools-hero {
			padding: 28px;
		}

		.webtools-request {
			padding: 20px;
		}
	}
</style>
