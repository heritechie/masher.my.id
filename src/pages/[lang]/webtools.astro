---
import Layout from '../../layouts/Layout.astro';
import { defaultLocale, SUPPORTED_LOCALES, translations, type Locale } from '../../i18n/translations';

export function getStaticPaths() {
	return SUPPORTED_LOCALES.map((lang) => ({
		params: { lang },
	}));
}

const requestedLang = Astro.params.lang;
const locale: Locale = SUPPORTED_LOCALES.includes(requestedLang as Locale) ? (requestedLang as Locale) : defaultLocale;
const t = translations[locale];

const languageLinks = SUPPORTED_LOCALES.map((code) => ({
	lang: code,
	label: t.layout.languageNames[code],
	href: `/${code}/webtools/`,
	active: code === locale,
}));

const navLinks = [
	{
		label: t.layout.learningJourneyLabel,
		href: `/${locale}/learning-journey/`,
		active: false,
	},
	{
		label: t.layout.knowledgeBaseLabel,
		href: `/${locale}/knowledge-base/`,
		active: false,
	},
	{
		label: t.layout.webtoolsLabel,
		href: `/${locale}/webtools/`,
		active: true,
	},
];

const tools = t.webtools.tools;
---

<Layout
	title={t.webtools.meta.title}
	description={t.webtools.meta.description}
	brand={t.layout.brand}
	tagline={t.layout.tagline}
	locale={locale}
	languageLinks={languageLinks}
	navLinks={navLinks}
	navLabel={t.layout.primaryNavLabel}
	mobileMenuLabel={t.layout.mobileMenuLabel}
	switcherLabel={t.layout.languageSwitcherLabel}
	themeToggleLabel={t.layout.themeToggleLabel}
>
	<section class="webtools-hero">
		<header class="webtools-hero__content">
			<span class="webtools-hero__eyebrow">
				<i class="ri-rocket-2-line" aria-hidden="true"></i>
				{t.webtools.title}
			</span>
			<h1>{t.webtools.tagline}</h1>
			<p class="webtools-hero__intro">{t.webtools.intro}</p>
			<p class="webtools-hero__note">
				<i class="ri-shield-check-line" aria-hidden="true"></i>
				<span>{t.webtools.note}</span>
			</p>
		</header>
	</section>

	<section class="webtools-grid" aria-label={t.webtools.title}>
		{tools.map((tool) => {
			const isSoon = tool.status === 'soon';
			return (
				<article class="tool-card">
					<header class="tool-card__header">
						<span class="tool-card__icon">
							<i class={`ri ${tool.icon}`} aria-hidden="true"></i>
						</span>
						<div class="tool-card__meta">
							<h2>{tool.title}</h2>
						</div>
					</header>
					<p class="tool-card__description">{tool.description}</p>
					<button class="tool-card__action" type="button" disabled>
						<span>{isSoon ? t.webtools.comingSoonLabel : t.webtools.launchLabel}</span>
						<i class="ri-arrow-right-up-line" aria-hidden="true"></i>
					</button>
				</article>
			);
		})}
	</section>

	<section class="webtools-request">
		<div class="webtools-request__content">
			<h2>{t.webtools.requestTitle}</h2>
			<p>{t.webtools.requestBody}</p>
		</div>
		<a class="webtools-request__cta" href="mailto:heritechie@gmail.com?subject=Webtools%20idea">
			<i class="ri-mail-send-line" aria-hidden="true"></i>
			<span>{t.webtools.requestAction}</span>
		</a>
	</section>
</Layout>

<style>
	.webtools-hero {
		display: grid;
		padding: 36px;
		border-radius: 28px;
		background:
			linear-gradient(160deg, rgba(210, 210, 207, 0.16), transparent 60%),
			var(--surface-card);
		border: 1px solid var(--glass-stroke);
		box-shadow: var(--shadow-soft);
		backdrop-filter: blur(22px);
	}

	.webtools-hero__content {
		display: grid;
		gap: 18px;
	}

	.webtools-hero__eyebrow {
		display: inline-flex;
		align-items: center;
		gap: 8px;
		padding: 6px 14px;
		border-radius: 999px;
		border: 1px solid var(--glass-stroke);
		background: var(--surface-highlight);
		color: var(--text-muted);
		font-size: 0.82rem;
		text-transform: uppercase;
		letter-spacing: 0.14em;
	}

	h1 {
		margin: 0;
		font-size: clamp(2.4rem, 5vw, 3.4rem);
	}

	.webtools-hero__intro {
		margin: 0;
		color: var(--text-muted);
		font-size: 1.08rem;
		max-width: 72ch;
	}

	.webtools-hero__note {
		display: inline-flex;
		align-items: center;
		gap: 10px;
		margin: 0;
		padding: 10px 18px;
		border-radius: 18px;
		background: var(--surface-highlight);
		border: 1px solid var(--glass-stroke);
		color: var(--text-main);
		font-size: 0.95rem;
	}

	.webtools-grid {
		display: grid;
		grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
		gap: 18px;
	}

	.tool-card {
		display: grid;
		gap: 16px;
		padding: 24px;
		border-radius: 22px;
		background: var(--surface-card);
		border: 1px solid var(--glass-stroke);
		box-shadow: var(--shadow-soft);
		position: relative;
		overflow: hidden;
	}

	.tool-card::after {
		content: '';
		position: absolute;
		inset: 0;
		background: linear-gradient(150deg, rgba(255, 255, 255, 0.08), transparent 60%);
		pointer-events: none;
	}

	.tool-card > * {
		position: relative;
	}

	.tool-card__header {
		display: flex;
		align-items: center;
		justify-content: space-between;
		gap: 16px;
	}

	.tool-card__icon {
		display: inline-flex;
		align-items: center;
		justify-content: center;
		width: 48px;
		height: 48px;
		border-radius: 16px;
		background: var(--surface-highlight);
		border: 1px solid var(--glass-stroke);
		color: var(--accent);
		font-size: 1.6rem;
	}

	.tool-card__meta {
		display: flex;
		flex-direction: column;
		gap: 4px;
		flex: 1;
	}

	.tool-card__meta h2 {
		margin: 0;
		font-size: 1.2rem;
	}

	.tool-card__description {
		margin: 0;
		color: var(--text-muted);
		line-height: 1.6;
	}

	.tool-card__action {
		display: inline-flex;
		align-items: center;
		gap: 8px;
		padding: 12px 16px;
		border-radius: 14px;
		border: 1px solid var(--accent-soft);
		background: transparent;
		color: var(--text-muted);
		font-weight: 600;
		letter-spacing: 0.06em;
		text-transform: uppercase;
		cursor: not-allowed;
	}

	.tool-card__action:disabled {
		opacity: 0.7;
	}

	.webtools-request {
		display: flex;
		flex-wrap: wrap;
		gap: 18px;
		align-items: center;
		justify-content: space-between;
		padding: 26px 28px;
		border-radius: 22px;
		background: var(--surface-card);
		border: 1px solid var(--glass-stroke);
		box-shadow: var(--shadow-soft);
	}

	.webtools-request__content {
		display: grid;
		gap: 8px;
		max-width: 560px;
	}

	.webtools-request__content h2 {
		margin: 0;
		font-size: 1.4rem;
	}

	.webtools-request__content p {
		margin: 0;
		color: var(--text-muted);
	}

	.webtools-request__cta {
		display: inline-flex;
		align-items: center;
		gap: 10px;
		padding: 12px 18px;
		border-radius: 14px;
		background: var(--accent);
		color: var(--surface);
		font-weight: 600;
		letter-spacing: 0.08em;
		text-transform: uppercase;
		box-shadow: 0 18px 36px rgba(0, 0, 0, 0.28);
		transition: transform 0.2s ease, box-shadow 0.2s ease;
	}

	.webtools-request__cta:hover {
		transform: translateY(-2px);
		box-shadow: 0 22px 44px rgba(0, 0, 0, 0.34);
	}

	@media (max-width: 720px) {
		.webtools-hero {
			padding: 28px;
		}

		.webtools-request {
			padding: 22px;
		}

		.webtools-request__content {
			max-width: unset;
		}
	}

	@media (max-width: 520px) {
		.webtools-hero {
			padding: 24px;
		}

		.webtools-grid {
			grid-template-columns: 1fr;
		}

		.tool-card {
			padding: 22px;
		}

		.webtools-request {
			flex-direction: column;
			align-items: stretch;
		}

		.webtools-request__cta {
			justify-content: center;
		}
	}
</style>
